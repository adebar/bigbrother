<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
  shape-rendering: crispEdges;
}

</style>
<body>
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<body>
  <div>Hello world.</div>
  <div id="demo"></div>
  <div id="demo2"></div>
</body>

<script>

function yahoo_direct_url(symbol, start_date, end_date, interval) {
  var url = 'https://finance-yql.media.yahoo.com/v7/finance/chart/' +
    + symbol + '?' +
    'period2=' + end_date + '&' +
    'period1=' + start_date + '&' +
    'interval=' + interval + '&' +
    'indicators=quote&' +
    'includeTimestamps=true&' +
    'includePrePost=true&' +
    'events=div%7Csplit%7Cearn&' +
    'corsDomain=finance.yahoo.com'
  return url
}

function yahoo_yql_url(url) {
  var yql_url = "https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D'" +
    encodeURIComponent(url) + "'&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys"
  return yql_url
}

direct_url = yahoo_direct_url('DX-Y.NYB', '1468450800', '1468686224', '1h')

document.getElementById("demo").innerHTML = direct_url;

var yql_url = yahoo_yql_url(direct_url);

$.getJSON(yql_url, function(data) {
    document.getElementById("demo2").innerHTML = data;
    console.log(data);
});

</script>
